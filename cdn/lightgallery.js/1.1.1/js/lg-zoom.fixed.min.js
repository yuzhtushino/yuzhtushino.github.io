function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).LgZoom=e()}}(function(){return function i(s,a,n){function u(o,e){if(!a[o]){if(!s[o]){var t="function"==typeof require&&require;if(!e&&t)return t(o,!0);if(c)return c(o,!0);var r=new Error("Cannot find module '"+o+"'");throw r.code="MODULE_NOT_FOUND",r}var l=a[o]={exports:{}};s[o][0].call(l.exports,function(e){var t=s[o][1][e];return u(t||e)},l,l.exports,i,s,a,n)}return a[o].exports}for(var c="function"==typeof require&&require,e=0;e<n.length;e++)u(n[e]);return u}({1:[function(e,t,o){!function(e,t){if(void 0!==o)t();else{t(),e.lgZoom={}}}(this,function(){"use strict";var e,t,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},r={scale:1,zoom:!0,actualSize:!0,enableZoomAfter:300,useLeftForZoom:(e=!1,t=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./),t&&parseInt(t[2],10)<54&&(e=!0),e)},l=function(e){return this.el=e,this.core=window.lgData[this.el.getAttribute("lg-uid")],this.core.s=o({},r,this.core.s),this.core.s.zoom&&this.core.doCss()&&(this.init(),this.zoomabletimeout=!1,this.pageX=window.innerWidth/2,this.pageY=window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop)),this};l.prototype.init=function(){var s=this,e='<span id="lg-zoom-in" class="lg-icon"></span><span id="lg-zoom-out" class="lg-icon"></span>';s.core.s.actualSize&&(e+='<span id="lg-actual-size" class="lg-icon"></span>'),s.core.s.useLeftForZoom?utils.addClass(s.core.outer,"lg-use-left-for-zoom"):utils.addClass(s.core.outer,"lg-use-transition-for-zoom"),this.core.outer.querySelector(".lg-toolbar").insertAdjacentHTML("beforeend",e),utils.on(s.core.el,"onSlideItemLoad.lgtmzoom",function(e){var t=s.core.s.enableZoomAfter+e.detail.delay;utils.hasClass(document.body,"lg-from-hash")&&e.detail.delay?t=0:utils.removeClass(document.body,"lg-from-hash"),s.zoomabletimeout=setTimeout(function(){utils.addClass(s.core.___slide[e.detail.index],"lg-zoomable")},t+30)});var a=1,t=function(e){var t=s.core.outer.querySelector(".lg-current .lg-image"),o=(window.innerWidth-t.clientWidth)/2,r=(window.innerHeight-t.clientHeight)/2+(document.documentElement.scrollTop||document.body.scrollTop),l=(e-1)*(s.pageX-o),i=(e-1)*(s.pageY-r);utils.setVendor(t,"Transform","scale3d("+e+", "+e+", 1)"),t.setAttribute("data-scale",e),s.core.s.useLeftForZoom?(t.parentElement.style.left=-l+"px",t.parentElement.style.top=-i+"px"):utils.setVendor(t.parentElement,"Transform","translate3d(-"+l+"px, -"+i+"px, 0)"),t.parentElement.setAttribute("data-x",l),t.parentElement.setAttribute("data-y",i)},n=function(){1<a?utils.addClass(s.core.outer,"lg-zoomed"):s.resetZoom(),a<1&&(a=1),t(a)},r=function(e,t,o,r){var l,i=t.clientWidth;l=s.core.s.dynamic?s.core.s.dynamicEl[o].width||t.naturalWidth||i:s.core.items[o].getAttribute("data-width")||t.naturalWidth||i,utils.hasClass(s.core.outer,"lg-zoomed")?a=1:i<l&&(a=l/i||2),s.pageY=r?(s.pageX=window.innerWidth/2,window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop)):(s.pageX=e.pageX||e.targetTouches[0].pageX,e.pageY||e.targetTouches[0].pageY),n(),setTimeout(function(){utils.removeClass(s.core.outer,"lg-grabbing"),utils.addClass(s.core.outer,"lg-grab")},10)},l=!1;utils.on(s.core.el,"onAferAppendSlide.lgtmzoom",function(e){var t=e.detail.index,o=s.core.___slide[t].querySelector(".lg-image");s.core.isTouch||utils.on(o,"dblclick",function(e){r(e,o,t)}),s.core.isTouch&&utils.on(o,"touchstart",function(e){l?(clearTimeout(l),l=null,r(e,o,t)):l=setTimeout(function(){l=null},300),e.preventDefault()})}),utils.on(window,"resize.lgzoom scroll.lgzoom orientationchange.lgzoom",function(){s.pageX=window.innerWidth/2,s.pageY=window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop),t(a)}),utils.on(document.getElementById("lg-zoom-out"),"click.lg",function(){s.core.outer.querySelector(".lg-current .lg-image")&&(a-=s.core.s.scale,n())}),utils.on(document.getElementById("lg-zoom-in"),"click.lg",function(){s.core.outer.querySelector(".lg-current .lg-image")&&(a+=s.core.s.scale,n())}),utils.on(document.getElementById("lg-actual-size"),"click.lg",function(e){r(e,s.core.___slide[s.core.index].querySelector(".lg-image"),s.core.index,!0)}),utils.on(s.core.el,"onBeforeSlide.lgtm",function(){a=1,s.resetZoom()}),s.core.isTouch||s.zoomDrag(),s.core.isTouch&&s.zoomSwipe()},l.prototype.resetZoom=function(){utils.removeClass(this.core.outer,"lg-zoomed");for(var e=0;e<this.core.___slide.length;e++)this.core.___slide[e].querySelector(".lg-img-wrap")&&(this.core.___slide[e].querySelector(".lg-img-wrap").removeAttribute("style"),this.core.___slide[e].querySelector(".lg-img-wrap").removeAttribute("data-x"),this.core.___slide[e].querySelector(".lg-img-wrap").removeAttribute("data-y"));for(var t=0;t<this.core.___slide.length;t++)this.core.___slide[t].querySelector(".lg-image")&&(this.core.___slide[t].querySelector(".lg-image").removeAttribute("style"),this.core.___slide[t].querySelector(".lg-image").removeAttribute("data-scale"));this.pageX=window.innerWidth/2,this.pageY=window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop)},l.prototype.zoomSwipe=function(){for(var l=this,i={},s={},a=!1,n=!1,u=!1,e=0;e<l.core.___slide.length;e++)utils.on(l.core.___slide[e],"touchstart.lg",function(e){if(utils.hasClass(l.core.outer,"lg-zoomed")){var t=l.core.___slide[l.core.index].querySelector(".lg-object");u=t.offsetHeight*t.getAttribute("data-scale")>l.core.outer.querySelector(".lg").clientHeight,((n=t.offsetWidth*t.getAttribute("data-scale")>l.core.outer.querySelector(".lg").clientWidth)||u)&&(e.preventDefault(),i={x:e.targetTouches[0].pageX,y:e.targetTouches[0].pageY})}});for(var t=0;t<l.core.___slide.length;t++)utils.on(l.core.___slide[t],"touchmove.lg",function(e){if(utils.hasClass(l.core.outer,"lg-zoomed")){var t,o,r=l.core.___slide[l.core.index].querySelector(".lg-img-wrap");e.preventDefault(),a=!0,s={x:e.targetTouches[0].pageX,y:e.targetTouches[0].pageY},utils.addClass(l.core.outer,"lg-zoom-dragging"),o=u?-Math.abs(r.getAttribute("data-y"))+(s.y-i.y):-Math.abs(r.getAttribute("data-y")),t=n?-Math.abs(r.getAttribute("data-x"))+(s.x-i.x):-Math.abs(r.getAttribute("data-x")),(15<Math.abs(s.x-i.x)||15<Math.abs(s.y-i.y))&&(l.core.s.useLeftForZoom?(r.style.left=t+"px",r.style.top=o+"px"):utils.setVendor(r,"Transform","translate3d("+t+"px, "+o+"px, 0)"))}});for(var o=0;o<l.core.___slide.length;o++)utils.on(l.core.___slide[o],"touchend.lg",function(){utils.hasClass(l.core.outer,"lg-zoomed")&&a&&(a=!1,utils.removeClass(l.core.outer,"lg-zoom-dragging"),l.touchendZoom(i,s,n,u))})},l.prototype.zoomDrag=function(){for(var l=this,i={},s={},a=!1,n=!1,u=!1,c=!1,e=0;e<l.core.___slide.length;e++)utils.on(l.core.___slide[e],"mousedown.lgzoom",function(e){var t=l.core.___slide[l.core.index].querySelector(".lg-object");c=t.offsetHeight*t.getAttribute("data-scale")>l.core.outer.querySelector(".lg").clientHeight,u=t.offsetWidth*t.getAttribute("data-scale")>l.core.outer.querySelector(".lg").clientWidth,utils.hasClass(l.core.outer,"lg-zoomed")&&utils.hasClass(e.target,"lg-object")&&(u||c)&&(e.preventDefault(),i={x:e.pageX,y:e.pageY},a=!0,l.core.outer.scrollLeft+=1,l.core.outer.scrollLeft-=1,utils.removeClass(l.core.outer,"lg-grab"),utils.addClass(l.core.outer,"lg-grabbing"))});utils.on(window,"mousemove.lgzoom",function(e){if(a){var t,o,r=l.core.___slide[l.core.index].querySelector(".lg-img-wrap");n=!0,s={x:e.pageX,y:e.pageY},utils.addClass(l.core.outer,"lg-zoom-dragging"),o=c?-Math.abs(r.getAttribute("data-y"))+(s.y-i.y):-Math.abs(r.getAttribute("data-y")),t=u?-Math.abs(r.getAttribute("data-x"))+(s.x-i.x):-Math.abs(r.getAttribute("data-x")),l.core.s.useLeftForZoom?(r.style.left=t+"px",r.style.top=o+"px"):utils.setVendor(r,"Transform","translate3d("+t+"px, "+o+"px, 0)")}}),utils.on(window,"mouseup.lgzoom",function(e){a&&(a=!1,utils.removeClass(l.core.outer,"lg-zoom-dragging"),!n||i.x===s.x&&i.y===s.y||(s={x:e.pageX,y:e.pageY},l.touchendZoom(i,s,u,c)),n=!1),utils.removeClass(l.core.outer,"lg-grabbing"),utils.addClass(l.core.outer,"lg-grab")})},l.prototype.touchendZoom=function(e,t,o,r){var l=this,i=l.core.___slide[l.core.index].querySelector(".lg-img-wrap"),s=l.core.___slide[l.core.index].querySelector(".lg-object"),a=-Math.abs(i.getAttribute("data-x"))+(t.x-e.x),n=-Math.abs(i.getAttribute("data-y"))+(t.y-e.y),u=(l.core.outer.querySelector(".lg").clientHeight-s.offsetHeight)/2,c=Math.abs(s.offsetHeight*Math.abs(s.getAttribute("data-scale"))-l.core.outer.querySelector(".lg").clientHeight+u),d=(l.core.outer.querySelector(".lg").clientWidth-s.offsetWidth)/2,g=Math.abs(s.offsetWidth*Math.abs(s.getAttribute("data-scale"))-l.core.outer.querySelector(".lg").clientWidth+d);(15<Math.abs(t.x-e.x)||15<Math.abs(t.y-e.y))&&(r&&(n<=-c?n=-c:-u<=n&&(n=-u)),o&&(a<=-g?a=-g:-d<=a&&(a=-d)),r?i.setAttribute("data-y",Math.abs(n)):n=-Math.abs(i.getAttribute("data-y")),o?i.setAttribute("data-x",Math.abs(a)):a=-Math.abs(i.getAttribute("data-x")),l.core.s.useLeftForZoom?(i.style.left=a+"px",i.style.top=n+"px"):utils.setVendor(i,"Transform","translate3d("+a+"px, "+n+"px, 0)"))},l.prototype.destroy=function(){var e=this;utils.off(e.core.el,".lgzoom"),utils.off(window,".lgzoom");for(var t=0;t<e.core.___slide.length;t++)utils.off(e.core.___slide[t],".lgzoom");utils.off(e.core.el,".lgtmzoom"),e.resetZoom(),clearTimeout(e.zoomabletimeout),e.zoomabletimeout=!1},window.lgModules.zoom=l})},{}]},{},[1])(1)});
//# sourceMappingURL=lg-zoom.fixed.min.js.map
