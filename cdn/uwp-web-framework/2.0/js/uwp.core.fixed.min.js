"use strict";!function(l,p){Element.prototype.prependChild=function(t){return this.insertBefore(t,this.firstChild)},Element.prototype.insertAfter=function(t,e){return e.parentNode.insertBefore(t,e.nextSibling)};var o=function(t){return t?Array.prototype.slice.call(t):[]},a=function(t){var e=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/,n=/^#(([0-9a-f]{1,2})([0-9a-f]{1,2})([0-9a-f]{1,2}))$/,a=t.toLowerCase();return e.test(a)?a.match(e).slice(1):n.test(a)?a.match(n).slice(2).map(function(t){return parseInt(t,16)}):(console.error("Unrecognized color format."),null)},i=function(t){return t.reduce(function(t,e){return t+parseInt(e,10)},0)/3},m=function(t,e){for(var n="js"==e?"script":"css"==e?"link":"none",a="js"==e?"src":"css"==e?"href":"none",o=p.getElementsByTagName(n)||"",i=o.length;0<=i;i--)o[i]&&null!=o[i].getAttribute(a)&&-1!=o[i].getAttribute(a).indexOf(t)&&o[i].parentNode.removeChild(o[i])},v=function(t){var e=p.createElement("div");return e.innerHTML=t,e},f={version:"2.0.0",config:{pageTitle:"UWP web framework",layoutType:"docked-minimized",activeColor:"#26C6DA",mainColor:"#373737",mainColorDarkened:"#0097A7",includes:"./includes/serguei-uwp",includeScript:"./libs/serguei-uwp/js/include-script",includeStyle:"./libs/serguei-uwp/css/include-style",navContainer:"nav-container",home:"home",hashNavKey:"page"},init:function(t){console.log("UWP.init()"),f.head=p.head,f.body=p.body;var e=p.createElement("div");e.setAttribute("class","uwp-title"),e.style.display="none",f.pageTitle=e,p.body.appendChild(f.pageTitle);var n=p.createElement("div");n.setAttribute("class","uwp-header"),f.header=n,p.body.appendChild(f.header);var a=p.createElement("div");a.setAttribute("class","uwp-main"),a.setAttribute("role","main"),f.main=a,p.body.appendChild(f.main),f.getConfig(t),f.pageTitle=f.config.pageTitle,f.header.type=f.config.layoutType,f.body.setAttribute("data-layout-type",f.header.type),f.body.addEventListener("click",function(t){null!==t.target.getAttribute("data-target")&&(t.stopPropagation(),t.preventDefault(),f.navigate(t.target.getAttribute("data-target")))}),f.getNavigation(),f.createStyles(),f.navigate(l.location.hash.split(/#\//)[1],!1),l.onhashchange=function(){f.navigate(l.location.hash.split(/#\//)[1],!1)},f.pageTitle=p.createElement("span"),f.header.prependChild(f.pageTitle)},getConfig:function(t){console.log("UWP.getConfig()"),f.config=function(){var t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};return t.apply(this,arguments)}(f.config,t)},getNavigation:function(t){console.log("UWP.getNavigation()"),void 0===t&&(t=f.config.navContainer);var e="".concat(f.config.includes,"/",t,".html"),n=l.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");n.overrideMimeType("text/html;charset=utf-8"),n.open("GET",e,!0),n.withCredentials=!1,n.onreadystatechange=function(){if(404===n.status||0===n.status)console.log("Error XMLHttpRequest-ing file",n.status);else if(4===n.readyState&&200===n.status&&n.responseText){var a=v(n.responseText).getElementsByTagName("nav-container")[0]||""||"",t=p.createElement("div");t.setAttribute("class","uwp-nav"),f.nav=t;var e=a&&a.getElementsByTagName("nav-list")||"";o(e).forEach(function(t){var e=p.createElement("ul");f.nav.appendChild(e);var n=a&&t.getElementsByTagName("nav-item")||"";o(n).forEach(function(t){e.appendChild(function(t){var e=(t&&t.getElementsByTagName("nav-label")[0]||"").textContent||"",n=(t&&t.getElementsByTagName("nav-target")[0]||"").textContent||"",a=t&&t.getElementsByTagName("nav-icon")[0]||"",o=p.createElement("li"),i=p.createElement("a");if(i.href="javascript:void(0);",i.title=e,i.innerHTML=e,a){var r=p.createElement("span");if(/\.(jpg|png|gif|svg)/.test(a.textContent)){var c=p.createElement("img");c.src=a.textContent,r.appendChild(c)}else r.innerHTML=a.innerHTML;i.prependChild(r)}return i.addEventListener("click",function(t){t.stopPropagation(),t.preventDefault(),l.location.hash!=="".concat("#/",n)&&(f.menuList.classList.remove("active"),f.navigate(n))}),i.setAttribute("data-target",n),o.appendChild(i),o}(t))})}),o(e).length&&(f.header.appendChild(f.nav),f.addMenuButton())}},n.send(null)},updateNavigation:function(){console.log("UWP.updateNavigation()");var t=p.getElementsByClassName("uwp-nav")[0]||"",e=t&&t.getElementsByTagName("a")||"";o(e).forEach(function(t){t.getAttribute("data-target")===f.config.currentPage?t.parentElement.classList.add("active"):t.parentElement.classList.remove("active")})},createStyles:function(){if(console.log("UWP.createStyles()"),f.customStyle=p.createElement("style"),f.config.mainColor){var t=a(f.config.mainColor);if(t){128<=i(t)?f.body.classList.add("theme-light"):f.body.classList.add("theme-dark");var e=t.map(function(t){var e=t-20;return e<0&&(e=0),e});f.config.mainColorDarkened||(f.config.mainColorDarkened="rgb(".concat(e,")"))}f.customStyle.innerHTML+='\n\t\t\t\t[data-layout-type="tabs"] .uwp-header {\n\t\t\t\t\tbackground: '.concat(f.config.mainColor,';\n\t\t\t\t}\n\n\t\t\t\t[data-layout-type="overlay"] .uwp-header {\n\t\t\t\t\tbackground: ').concat(f.config.mainColor,';\n\t\t\t\t}\n\t\t\t\t[data-layout-type="overlay"] .uwp-header .uwp-nav:nth-of-type(1) {\n\t\t\t\t\tbackground-color: ').concat(f.config.mainColorDarkened,';\n\t\t\t\t}\n\n\t\t\t\t[data-layout-type="docked-minimized"] .uwp-header {\n\t\t\t\t\tbackground: ').concat(f.config.mainColor,';\n\t\t\t\t}\n\t\t\t\t[data-layout-type="docked-minimized"] .uwp-header .uwp-nav:nth-of-type(1) {\n\t\t\t\t\tbackground: ').concat(f.config.mainColorDarkened,';\n\t\t\t\t}\n\n\t\t\t\t[data-layout-type="docked"] .uwp-header {\n\t\t\t\t\tbackground: ').concat(f.config.mainColor,';\n\t\t\t\t}\n\t\t\t\t[data-layout-type="docked"] .uwp-header .uwp-nav:nth-of-type(1) {\n\t\t\t\t\tbackground: ').concat(f.config.mainColorDarkened,";\n\t\t\t\t}\n\t\t\t")}if(f.config.activeColor){var n=a(f.config.activeColor);if(n)128<=i(n)?f.body.classList.add("active-light"):f.body.classList.add("active-dark");f.customStyle.innerHTML+='\n\t\t\t\t[data-layout-type="tabs"] .uwp-header .uwp-nav:nth-of-type(1) ul li.active {\n\t\t\t\t\tcolor: '.concat(f.config.activeColor,";\n\t\t\t\t\tborder-bottom-color: ").concat(f.config.activeColor,';\n\t\t\t\t}\n\t\t\t\t[data-layout-type="overlay"] .uwp-header .uwp-nav:nth-of-type(1) ul li.active {\n\t\t\t\t\tbackground-color: ').concat(f.config.activeColor,';\n\t\t\t\t}\n\t\t\t\t[data-layout-type="docked-minimized"] .uwp-header .uwp-nav:nth-of-type(1) ul li.active {\n\t\t\t\t\tbackground-color: ').concat(f.config.activeColor,';\n\t\t\t\t}\n\t\t\t\t[data-layout-type="docked"] .uwp-header .uwp-nav:nth-of-type(1) ul li.active {\n\t\t\t\t\tbackground-color: ').concat(f.config.activeColor,";\n\t\t\t\t}\n\t\t\t")}f.customStyle.innerHTML.length&&f.body.appendChild(f.customStyle)},addMenuButton:function(){console.log("UWP.addMenuButton()");var t=p.createElement("button");t.setAttribute("class","uwp-menu-button"),f.menuButton=t,f.menuButton.innerHTML='<svg width="1792" height="1792" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" transform="scale(1.75 1.75) translate(0 0)" d="M1024 320h-1024v-64h1024v64zm0 512h-1024v-64h1024v64zm0-256.5h-1024v-63.5h1024v63.5z"/></svg>',f.menuButton.setAttribute("aria-label","Menu");var e=f.header.getElementsByClassName("uwp-nav")[0]||"";f.menuList=e||"",f.menuButton.addEventListener("click",function(){f.menuList.classList.toggle("active")}),f.main.addEventListener("click",function(){f.menuList.classList.remove("active")}),f.header.prependChild(f.menuButton)},navigate:function(t,e){function u(t){f.main.classList.add("error"),f.main.innerHTML='\n\t\t\t\t<div class="error-container">\n\t\t\t\t\t<p>'.concat(t,'</p>\n\t\t\t\t\t<p><a href="javascript:void(0);">Go Home</a></p>\n\t\t\t\t</div>\n\t\t\t'),(f.main.getElementsByTagName("a")[0]||"").addEventListener("click",function(t){t.stopPropagation(),t.preventDefault(),f.navigate(f.config.home)}),f.updateNavigation()}console.log("UWP.navigate()"),void 0===t&&(t=f.config.home),f.config.currentPage=t,!1!==e&&history.pushState("","","".concat(l.location.href.split(/#\//)[0],"#/",t)),f.main.classList.remove("error");var n=(f.main.innerHTML="").concat(f.config.includes,"/").concat(t,".html"),g=l.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");g.overrideMimeType("text/html;charset=utf-8"),g.open("GET",n,!0),g.withCredentials=!1,g.onreadystatechange=function(){if(404===g.status||0===g.status)console.log("Error XMLHttpRequest-ing file",g.status),console.error("Something went wrong"),u("Something went wrong");else if(4===g.readyState&&200===g.status&&g.responseText){var t=v(g.responseText).getElementsByTagName("page-container")[0]||"";t||(console.error("Something went wrong"),u("Something went wrong"));var e=(t&&t.getElementsByTagName("page-title")[0]||"").textContent||"",n=(t&&t.getElementsByTagName("page-content")[0]||"").innerHTML||"",a=t&&t.getElementsByTagName("include-script")[0]||"",o=t&&t.getElementsByTagName("include-style")[0]||"";if(f.main.innerHTML="",f.main.innerHTML=n,f.main.classList.remove("start-animation"),f.main.offsetWidth,f.main.classList.add("start-animation"),f.pageTitle.innerHTML=e,p.title="".concat(e," - ").concat(f.config.pageTitle),a){var i=a.textContent,r="".concat(f.config.includeScript,"/").concat(i);m(r,"js");var c=p.createElement("script");c.setAttribute("src",r),c.async=!0,f.body.appendChild(c)}if(o){var l=o.textContent,s="".concat(f.config.includeStyle,"/").concat(l);m(s,"css");var d=p.createElement("link");d.setAttribute("href",s),d.setAttribute("property","stylesheet"),d.rel="stylesheet",d.media="all",f.body.appendChild(d)}f.updateNavigation()}},g.send(null)}};l.UWP=f}("undefined"!=typeof window?window:void 0,document);