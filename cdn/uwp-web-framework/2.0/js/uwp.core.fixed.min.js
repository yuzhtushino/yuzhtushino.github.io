!function(p,m){"use strict";Element.prototype.prependChild=function(e){var t=this.firstChild;return t?this.insertBefore(e,t):this.appendChild(e)};var i=function(e){return e?Array.prototype.slice.call(e):[]},a=function(e){var t=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/,n=/^#(([0-9a-f]{1,2})([0-9a-f]{1,2})([0-9a-f]{1,2}))$/,a=e.toLowerCase();return t.test(a)?a.match(t).slice(1):n.test(a)?a.match(n).slice(2).map(function(e){return parseInt(e,16)}):(console.error("Unrecognized color format."),null)},o=function(e){return e.reduce(function(e,t){return e+parseInt(t,10)},0)/3},v=function(e,t){for(var n="js"==t?"script":"css"==t?"link":"none",a="js"==t?"src":"css"==t?"href":"none",i=m.getElementsByTagName(n)||"",o=i.length;0<=o;o--)i[o]&&null!=i[o].getAttribute(a)&&-1!=i[o].getAttribute(a).indexOf(e)&&i[o].parentNode.removeChild(i[o])},f=function(e){var t=m.createElement("div");return t.innerHTML=e,t},h={version:"2.0.0",config:{pageTitle:"UWP web framework",layoutType:"docked-minimized",activeColor:"#26C6DA",mainColor:"#373737",mainColorDarkened:"#0097A7",includes:"./includes/serguei-uwp",includeScript:"./libs/serguei-uwp/js/include-script",includeStyle:"./libs/serguei-uwp/css/include-style",navContainer:"nav-container",home:"home",hashNavKey:"page",hashBang:"#/",onPageLoad:function(){},errorTitle:"Something went wrong",errorLinkText:"Go Home"},init:function(e){console.log("UWP.init()"),h.head=m.head,h.body=m.body;var t=m.createElement("div");t.setAttribute("class","uwp-title"),t.style.display="none",h.pageTitle=t,m.body.appendChild(h.pageTitle),h.container=null;var n=m.getElementsByClassName("uwp-container")[0]||"";if(n)h.container=n;else{var a=m.createElement("div");a.setAttribute("class","uwp-container"),a.setAttribute("role","document"),h.container=a,m.body.appendChild(h.container)}h.header=null;var i=m.getElementsByClassName("uwp-header")[0]||"";if(i)h.header=i;else{var o=m.createElement("div");o.setAttribute("class","uwp-header"),o.setAttribute("role","navigation"),h.header=o,h.container.appendChild(h.header)}h.main=null;var r=m.getElementsByClassName("uwp-main")[0]||"";if(r)h.main=r;else{var l=m.createElement("div");l.setAttribute("class","uwp-main"),l.setAttribute("role","main"),h.main=l,h.container.appendChild(h.main)}h.loading=null;var c=m.getElementsByClassName("uwp-loading")[0]||"";if(c)h.loading=c;else{var s=m.createElement("div");s.setAttribute("class","uwp-loading"),s.setAttribute("role","main"),s.innerHTML='<div class="uwp-loading__part"><div class="uwp-loading__rotator"></div></div><div class="uwp-loading__part uwp-loading__part--bottom"><div class="uwp-loading__rotator"></div></div>\n',h.loading=s,m.body.appendChild(h.loading)}h.revealUWPLoading=function(){h.loading.classList.add("is-active")},h.concealUWPLoading=function(){var e=setTimeout(function(){clearTimeout(e),e=null,h.loading.classList.remove("is-active")},1e3)},h.removeUWPLoading=function(){h.loading.classList.remove("is-active")},h.getConfig(e),h.pageTitle=h.config.pageTitle,h.header.type=h.config.layoutType,h.body.setAttribute("data-layout-type",h.header.type),h.body.addEventListener("click",function(e){null!==e.target.getAttribute("data-target")&&(e.stopPropagation(),e.preventDefault(),h.navigate(e.target.getAttribute("data-target")))}),h.getNavigation(),h.createStyles(),h.navigate(p.location.hash.split(/#\//)[1],!1),p.onhashchange=function(){h.navigate(p.location.hash.split(/#\//)[1],!1)};var d=m.getElementsByClassName("uwp-page-heading")[0]||"";if(d)h.pageTitle=d;else{var u=m.createElement("h1");u.setAttribute("class","uwp-page-heading"),u.innerHTML=h.pageTitle,h.pageTitle=u,h.header.appendChild(h.pageTitle)}},getConfig:function(e){console.log("UWP.getConfig()"),h.config=function(){var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};return e.apply(this,arguments)}(h.config,e)},getNavigation:function(e){console.log("UWP.getNavigation()"),void 0===e&&(e=h.config.navContainer);var t="".concat(h.config.includes,"/",e,".html"),n=p.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");n.overrideMimeType("text/html;charset=utf-8"),n.open("GET",t,!0),n.withCredentials=!1,n.onreadystatechange=function(){if(404===n.status||0===n.status)console.log("Error XMLHttpRequest-ing file",n.status);else if(4===n.readyState&&200===n.status&&n.responseText){var a=f(n.responseText).getElementsByTagName("nav-container")[0]||""||"",e=m.createElement("div");e.setAttribute("class","uwp-nav"),h.nav=e;var t=a&&a.getElementsByTagName("nav-list")||"";i(t).forEach(function(e){var t=m.createElement("ul");h.nav.appendChild(t);var n=a&&e.getElementsByTagName("nav-item")||"";i(n).forEach(function(e){t.appendChild(function(e){var t=(e&&e.getElementsByTagName("nav-label")[0]||"").textContent||"",n=(e&&e.getElementsByTagName("nav-target")[0]||"").textContent||"",a=e&&e.getElementsByTagName("nav-icon")[0]||"",i=m.createElement("li"),o=m.createElement("a");if(o.href="javascript:void(0);",o.title=t,o.innerHTML=t,a){var r=m.createElement("span");if(/\.(jpg|png|gif|svg)/.test(a.textContent)){var l=m.createElement("img");l.src=a.textContent,r.appendChild(l)}else r.innerHTML=a.innerHTML;o.prependChild(r)}return o.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),p.location.hash!=="".concat(h.config.hashBang,n)&&(h.menuList.classList.remove("active"),h.navigate(n))}),o.setAttribute("data-target",n),i.appendChild(o),i}(e))})}),i(t).length&&(h.header.appendChild(h.nav),h.addMenuButton())}},n.send(null)},updateNavigation:function(){console.log("UWP.updateNavigation()");var e=m.getElementsByClassName("uwp-nav")[0]||"",t=e&&e.getElementsByTagName("a")||"";i(t).forEach(function(e){e.getAttribute("data-target")===h.config.currentPage?e.parentElement.classList.add("active"):e.parentElement.classList.remove("active")})},createStyles:function(){if(console.log("UWP.createStyles()"),h.customStyle=m.createElement("style"),h.config.mainColor){var e=a(h.config.mainColor);if(e){128<=o(e)?h.body.classList.add("uwp-theme--light"):h.body.classList.add("uwp-theme--dark");var t=e.map(function(e){var t=e-20;return t<0&&(t=0),t});h.config.mainColorDarkened||(h.config.mainColorDarkened="rgb(".concat(t,")"))}h.customStyle.innerHTML+='\n\t[data-layout-type="tabs"] .uwp-header {\n\tbackground: '.concat(h.config.mainColor,';\n\t}\n\n\t[data-layout-type="overlay"] .uwp-header {\n\tbackground: ').concat(h.config.mainColor,';\n\t}\n\t[data-layout-type="overlay"] .uwp-header .uwp-nav:nth-of-type(1) {\n\tbackground-color: ').concat(h.config.mainColorDarkened,';\n\t}\n\n\t[data-layout-type="docked-minimized"] .uwp-header {\n\tbackground: ').concat(h.config.mainColor,';\n\t}\n\t[data-layout-type="docked-minimized"] .uwp-header .uwp-nav:nth-of-type(1) {\n\tbackground: ').concat(h.config.mainColorDarkened,';\n\t}\n\n\t[data-layout-type="docked"] .uwp-header {\n\tbackground: ').concat(h.config.mainColor,';\n\t}\n\t[data-layout-type="docked"] .uwp-header .uwp-nav:nth-of-type(1) {\n\tbackground: ').concat(h.config.mainColorDarkened,";\n\t}\n\t")}if(h.config.activeColor){var n=a(h.config.activeColor);if(n)128<=o(n)?h.body.classList.add("uwp-theme--active-light"):h.body.classList.add("uwp-theme--active-dark");h.customStyle.innerHTML+='\n\t[data-layout-type="tabs"] .uwp-header .uwp-nav:nth-of-type(1) ul li.active {\n\tcolor: '.concat(h.config.activeColor,";\n\tborder-bottom-color: ").concat(h.config.activeColor,';\n\t}\n\t[data-layout-type="overlay"] .uwp-header .uwp-nav:nth-of-type(1) ul li.active {\n\tbackground-color: ').concat(h.config.activeColor,';\n\t}\n\t[data-layout-type="docked-minimized"] .uwp-header .uwp-nav:nth-of-type(1) ul li.active {\n\tbackground-color: ').concat(h.config.activeColor,';\n\t}\n\t[data-layout-type="docked"] .uwp-header .uwp-nav:nth-of-type(1) ul li.active {\n\tbackground-color: ').concat(h.config.activeColor,";\n\t}\n\t")}h.customStyle.innerHTML.length&&h.body.appendChild(h.customStyle)},addMenuButton:function(){console.log("UWP.addMenuButton()"),h.menuButton=null;var e=m.getElementsByClassName("uwp-menu-button")[0]||"";if(e)h.menuButton=e;else{var t=m.createElement("button");t.setAttribute("class","uwp-menu-button"),t.setAttribute("aria-label","Menu"),t.innerHTML='<svg width="1792" height="1792" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" transform="scale(1.75 1.75) translate(0 0)" d="M1024 320h-1024v-64h1024v64zm0 512h-1024v-64h1024v64zm0-256.5h-1024v-63.5h1024v63.5z"/></svg>',h.menuButton=t,h.header.prependChild(h.menuButton)}h.menuList=h.header.getElementsByClassName("uwp-nav")[0]||"",h.menuList&&(h.menuButton.addEventListener("click",function(){h.menuList.classList.toggle("active")}),h.main.addEventListener("click",function(){h.menuList.classList.remove("active")}))},navigate:function(e,t){function u(e,t){h.main.innerHTML='\n\t<div class="uwp-error">\n\t<p>'.concat(e,'</p>\n\t<p><a href="javascript:void(0);" class="error-link">'+t+"</a></p>\n\t</div>\n\t"),(h.main.getElementsByClassName("error-link")[0]||"").addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),h.navigate(h.config.home)}),h.updateNavigation(),h.removeUWPLoading()}console.log("UWP.navigate()"),void 0===e&&(e=h.config.home),h.config.currentPage=e,!1!==t&&history.pushState("","","".concat(p.location.href.split(/#\//)[0],h.config.hashBang,e));var n=(h.main.innerHTML="").concat(h.config.includes,"/").concat(e,".html"),g=p.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");g.overrideMimeType("text/html;charset=utf-8"),g.open("GET",n,!0),g.withCredentials=!1,g.onreadystatechange=function(){if(404===g.status||0===g.status)console.log("Error XMLHttpRequest-ing file",g.status),console.error(h.config.errorTitle),u(h.config.errorTitle,h.config.errorLinkText);else if(4===g.readyState&&200===g.status&&g.responseText){var e=f(g.responseText).getElementsByTagName("page-container")[0]||"";e||(console.error(h.config.errorTitle),u(h.config.errorTitle,h.config.errorLinkText)),h.revealUWPLoading();var t=(e&&e.getElementsByTagName("page-title")[0]||"").textContent||"",n=(e&&e.getElementsByTagName("page-content")[0]||"").innerHTML||"",a=e&&e.getElementsByTagName("include-script")[0]||"",i=e&&e.getElementsByTagName("include-style")[0]||"";if(h.main.innerHTML="",h.main.innerHTML=n,h.main.classList.remove("uwp-main--with-animation"),h.main.offsetWidth,h.main.classList.add("uwp-main--with-animation"),h.pageTitle.innerHTML=t,m.title="".concat(t," - ").concat(h.config.pageTitle),a){var o=a.textContent,r="".concat(h.config.includeScript,"/").concat(o);v(r,"js");var l=m.createElement("script");l.setAttribute("src",r),l.async=!0,h.body.appendChild(l)}if(i){var c=i.textContent,s="".concat(h.config.includeStyle,"/").concat(c);v(s,"css");var d=m.createElement("link");d.setAttribute("href",s),d.setAttribute("property","stylesheet"),d.rel="stylesheet",d.media="all",h.body.appendChild(d)}h.config.onPageLoad&&"function"==typeof h.config.onPageLoad&&h.config.onPageLoad(),h.updateNavigation(),h.concealUWPLoading()}},g.send(null)}};p.UWP=h}("undefined"!=typeof window?window:this,document);
//# sourceMappingURL=uwp.core.fixed.min.js.map
